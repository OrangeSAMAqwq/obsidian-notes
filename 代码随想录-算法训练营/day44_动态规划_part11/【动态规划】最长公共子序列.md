# 题目：最长公共子序列（Longest Common Subsequence, LCS）🧩📈🧠

---

## 🧠 题目理解

给定两个字符串 `text1` 和 `text2`，求它们的 **最长公共子序列** 的长度。

注意关键词区分：

- **子序列（subsequence）**：不要求连续，但相对顺序必须保持
- **公共**：两个字符串中都出现
- 返回的是 **长度**，不要求输出具体序列

---

## 🔍 问题建模：二维 DP（经典 LCS 模型）

这是动态规划中**最经典、最基础**的二维 DP 问题之一。

核心原因在于：

- 是否选用当前字符，取决于两个字符串的当前下标
- 状态必须同时由 `text1` 和 `text2` 的前缀决定

因此自然建模为：

> **dp[i][j] 表示 text1 前 i 个字符与 text2 前 j 个字符的 LCS 长度**

---

## ✨ 状态设计（核心）

定义二维 DP 数组：

```text
dp[i][j]：text1[0..i-1] 与 text2[0..j-1] 的最长公共子序列长度
```

解释说明：

- `i`、`j` 表示“前缀长度”
- 使用 `n+1`、`m+1` 的维度是为了方便处理边界情况
- `dp[0][*]` 和 `dp[*][0]` 表示有一个字符串为空，LCS 长度为 0

---

## 🔁 状态转移方程

分两种情况讨论：

### 情况一：当前字符相等

```text
若 text1[i-1] == text2[j-1]：
    dp[i][j] = dp[i-1][j-1] + 1
```

含义：

- 当前字符可以作为公共子序列的一部分
- 在前一个最优解的基础上长度 +1

---

### 情况二：当前字符不相等

```text
若 text1[i-1] != text2[j-1]：
    dp[i][j] = max(dp[i-1][j], dp[i][j-1])
```

含义：

- 当前字符不能同时选
- 尝试：
  - 不用 `text1[i-1]`
  - 或不用 `text2[j-1]`
- 取两种选择中的最优结果

---

## 🧱 初始化

```text
dp[0][j] = 0
dp[i][0] = 0
```

含义：

- 只要有一个字符串长度为 0
- 公共子序列长度必然为 0

---

## 💻 代码实现（你的版本）

```c++
class Solution {
public:
    int longestCommonSubsequence(string text1, string text2) {
        int n = text1.size(), m = text2.size();
        vector<vector<int>> dp(n + 1, vector<int>(m + 1, 0));
        for (int i = 1; i <= n; i++){
            for (int j = 1; j <= m; j++){
                if (text1[i - 1] == text2[j - 1]){
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                }
                else {
                    dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]);
                }
            }
        }
        return dp[n][m];
    }
};
```

---

## ⏱️ 复杂度分析

- **时间复杂度**：O(n × m)
- **空间复杂度**：O(n × m)

---

## 🧾 核心记忆点（非常重要）

```text
LCS（最长公共子序列）DP 模板：
字符相等 -> 来自左上角 +1
字符不等 -> max(上, 左)
```

一句话总结：

> **LCS 的本质是在两个前缀之间做选择，是否使用当前字符。**

---

## 🔗 与相似问题的对比（强化记忆）

- 最长公共子序列（LCS）：  
  ✔ 不连续  
  ✔ 用 max(上, 左)

- 最长公共子串 / 子数组：  
  ✔ 必须连续  
  ✔ 只从左上角转移，不等即归 0

---

## 🔗 思维迁移

该模型可以直接迁移到：

- 字符串编辑距离
- 判断一个字符串是否为另一个的子序列
- 多序列对齐类 DP 问题

这是 **二维 DP 的必会模板之一**，后续大量字符串 DP 都基于它展开。
