# 题目：用队列实现栈 (Implement Stack using Queues) 📤➡️📥

## 题目链接 🌐  
https://leetcode.cn/problems/implement-stack-using-queues/

---

## 解题思路 🧠

### 题意理解 📋

要求使用**队列**（只能使用 `push`, `pop`, `front`, `back`, `empty`）来实现一个栈的行为：

- `push(x)`：将元素压入栈顶；
- `pop()`：移除并返回栈顶元素；
- `top()`：返回栈顶元素；
- `empty()`：判断是否为空栈。

---

### 解法思路：使用一个队列模拟栈行为 🧩

我们用一个队列 `stackQ` 来模拟栈，核心思想如下：

> 每次 `pop()` 的时候，我们把前 `n-1` 个元素依次出队后再入队，这样原来的最后一个元素（即栈顶）就移动到了队首。

#### 各操作说明：

- `push(x)`：直接 `stackQ.push(x)`，队尾入队。
- `top()`：直接返回 `stackQ.back()`，即最新加入的元素。
- `pop()`：
  1. 将队列前 `n-1` 个元素（即除了最后一个元素）依次出队并重新入队；
  2. 此时最后一个元素被移动到了队首，即原来的“栈顶”；
  3. 弹出队首元素并返回；
- `empty()`：直接返回 `stackQ.empty()`。

---

## 代码实现 💻

```cpp
class MyStack {
private:
    std::queue<int> stackQ;
public:
    MyStack() {
        // 初始化空队列
    }
    
    void push(int x) {
        stackQ.push(x);  // 队尾加入
    }
    
    int pop() {
        // 将前 n-1 个元素重新入队，把最后一个元素移到队首
        for (int i = 0 ; i < stackQ.size() - 1; i++) {
            stackQ.push(stackQ.front());
            stackQ.pop();
        }
        int x = stackQ.front();
        stackQ.pop();  // 弹出模拟的“栈顶”
        return x;
    }
    
    int top() {
        return stackQ.back();  // 返回最后插入的元素
    }
    
    bool empty() {
        return stackQ.empty(); 
    }
};
```

---

## 操作示例 🎯

假设操作顺序为：

```cpp
MyStack st;
st.push(1);
st.push(2);
st.pop();   // 输出 2
st.push(3);
st.top();   // 输出 3
```

内部过程如下：

| 操作     | 队列状态      | 栈顶元素（模拟） |
|----------|----------------|------------------|
| push(1)  | 1              | 1                |
| push(2)  | 1, 2           | 2                |
| pop()    | 2              | 2 被返回         |
| push(3)  | 2, 3           | 3                |
| top()    | 2, 3           | 3                |

---

## 关键点 🔑

- **队列先进先出**，栈是后进先出；
- 为了模拟栈，需要借助“循环入队”的方式来获取最后加入的元素；
- `pop()` 操作的核心就是：把队列**旋转**一次，把“栈顶”移到队首。

---

## 时间复杂度分析 ⏱️

- `push(x)`：O(1)
- `pop()`：O(n)，因为要移动 `n-1` 个元素；
- `top()`：O(1)
- `empty()`：O(1)

> 注意：这种实现方式将栈的“出栈”操作变为线性时间。

---

## 总结 📚

这道题是经典的“**用 A 模拟 B**”数据结构题目之一，重点在于掌握队列和栈的差异，并通过**元素重排**的方式来模拟所需行为。

- 可以用一个队列实现栈（也可用两个队列，另一种思路）；
- `pop()` 时的元素“翻转”是本题的关键操作；
- 是掌握数据结构底层实现逻辑的好题 ✅
