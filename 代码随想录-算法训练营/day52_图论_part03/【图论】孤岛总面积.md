# 孤岛总面积（DFS / Flood Fill）🧱🌊

## 🧩 题意理解

这是一个 **二维网格区域判定问题**：

- 给定一个由 `0 / 1` 组成的二维网格
- `1` 表示陆地，`0` 表示水域
- **与边界相连的陆地不会被围绕**
- 完全被 `0` 包围的 `1` 才会被计入答案

目标是统计：  
> **被完全围绕的陆地格子的数量**

---

## 💡 核心思想

本题的关键不在于「数陆地」，而在于：

> **区分哪些陆地是“安全的”（连通到边界），哪些是“被围绕的”**

整体策略是一个非常经典的思路：

1. **从边界出发**
2. 将所有与边界连通的陆地标记为“安全”
3. 剩下未被标记的陆地，一定是被围绕的

---

## 🔍 算法设计

### ① 状态标记设计

网格中的取值含义：

```text
0：水域
1：未访问的陆地
2：与边界连通的安全陆地
```

通过将安全陆地标记为 `2`，可以避免重复访问，同时区分不同状态。

---

### ② DFS 定义（边界扩散）

DFS 的职责是：

> **从边界上的某一块陆地出发，标记整块与边界连通的区域**

DFS 规则：

- 如果越界，直接返回
- 如果当前格子不是 `1`，直接返回
- 否则：
  - 将当前格子标记为 `2`
  - 向四个方向继续 DFS

---

### ③ 主流程

整体流程分为三步：

1. **遍历四条边界**
   - 对边界上的所有 `1` 启动 DFS
   - 标记所有与边界连通的陆地为 `2`
2. **遍历整个网格**
   - 剩余仍为 `1` 的格子
   - 即为被完全围绕的陆地
3. **统计数量**

---

## ✅ C++ 实现代码（DFS）

```cpp
#include <cstdio>
#include <iostream>
#include <vector>
using namespace std;

const vector<int> Dx = {1, -1, 0, 0};
const vector<int> Dy = {0, 0, 1, -1};

void dfs(auto &grid, int i, int j, int N, int M){
    if (i < 0 || i >= N || j < 0 || j >= M)
        return;
    if (grid[i][j] != 1)
        return;

    grid[i][j] = 2;

    for (int k = 0; k < 4; k++){
        dfs(grid, i + Dx[k], j + Dy[k], N, M);
    }
}

int main(){
    int N, M;
    int ans = 0;
    cin >> N >> M;

    vector<vector<int>> grid(N, vector<int>(M, 0));
    for (int i = 0; i < N; i++){
        for (int j = 0; j < M; j++){
            int temp;
            cin >> temp;
            grid[i][j] = temp;
        }
    }

    // 从边界出发，标记安全陆地
    for (int i = 0; i < N; i++){
        for (int j = 0; j < M; j++){
            if (i == 0 || i == N - 1 || j == 0 || j == M - 1){
                if (grid[i][j] == 1){
                    dfs(grid, i, j, N, M);
                }
            }
        }
    }

    // 统计被围绕的陆地
    for (int i = 0; i < N; i++){
        for (int j = 0; j < M; j++){
            if (grid[i][j] == 1)
                ans++;
        }
    }

    cout << ans << endl;
    return 0;
}
```

---

## 🧠 总结

- 本题是 **Flood Fill + 边界扩散** 的经典应用
- 解题关键是：
  - 不直接找“被围绕的”
  - 而是先找“不会被围绕的”
- 该思想可以迁移到：
  - 被围绕的区域
  - 封闭岛屿数量
  - 边界连通性问题

---

📌 **一句话记忆**：

> 被围绕问题 = 从边界 DFS，剩下的就是答案

