# é¢˜ç›®ï¼šç»„åˆæ€»å’Œ II (Combination Sum II) ğŸ¯ğŸ§©

## é¢˜ç›®é“¾æ¥  
https://leetcode.cn/problems/combination-sum-ii/

---

## ğŸ§  è§£é¢˜æ€è·¯

### ğŸ“‹ é¢˜æ„ç†è§£  
ç»™å®šä¸€ä¸ªæ•°ç»„ `candidates`ï¼ˆ**å¯èƒ½åŒ…å«é‡å¤å…ƒç´ **ï¼‰å’Œç›®æ ‡å€¼ `target`ï¼Œæ‰¾å‡ºæ‰€æœ‰å’Œä¸º `target` çš„ç»„åˆã€‚

è§„åˆ™ï¼š

- æ¯ä¸ªæ•°å­— **æœ€å¤šä½¿ç”¨ä¸€æ¬¡**ï¼ˆä¸èƒ½æ— é™é€‰ï¼‰
- è¿”å›æ‰€æœ‰ä¸é‡å¤çš„ç»„åˆï¼ˆç»„åˆå†…é¡ºåºä¸é‡è¦ï¼‰
- `candidates` å¯èƒ½æœ‰é‡å¤å€¼ï¼Œå› æ­¤éœ€è¦**å»é‡å¤„ç†**

---

## ğŸŒŸ æ ¸å¿ƒæ€æƒ³ï¼šå›æº¯ï¼ˆBacktrackingï¼‰+ æ’åº + æ ‘å±‚å»é‡

å›æº¯æœç´¢è¿‡ç¨‹ä¸­ç»´æŠ¤ï¼š

- `t`ï¼šå½“å‰ç»„åˆè·¯å¾„
- `sum`ï¼šå½“å‰è·¯å¾„å’Œ
- `start`ï¼šæœ¬å±‚æšä¸¾èµ·ç‚¹ï¼ˆé¿å…é¡ºåºé‡å¤ï¼‰
- æ•°ç»„å…ˆæ’åºï¼šæ–¹ä¾¿å‰ªæ + å»é‡

---

## âœ… å»é‡å…³é”®ï¼šæ ‘å±‚å»é‡ï¼ˆåŒä¸€å±‚ä¸èƒ½é€‰ç›¸åŒå€¼ï¼‰

å› ä¸ºæ•°ç»„é‡Œå¯èƒ½å‡ºç°é‡å¤å…ƒç´ ï¼Œä¾‹å¦‚ï¼š

```
[1,1,2]
```

å¦‚æœä¸å»é‡ï¼ŒåŒä¸€å±‚ä¼šå‡ºç°ï¼š

- é€‰ç¬¬ä¸€ä¸ª `1` å¼€å¤´çš„ç»„åˆ
- é€‰ç¬¬äºŒä¸ª `1` å¼€å¤´çš„ç»„åˆï¼ˆå®Œå…¨é‡å¤ï¼‰âŒ

å› æ­¤åœ¨ `for` å¾ªç¯ä¸­åŠ å…¥ï¼š

```cpp
if (i != start && candidates[i] == candidates[i - 1])
    continue;
```

å«ä¹‰ï¼š

- **åŒä¸€å±‚**ï¼ˆåŒä¸€ä¸ª startï¼‰é‡Œï¼Œå¦‚æœå½“å‰å€¼å’Œä¸Šä¸€ä¸ªç›¸åŒï¼Œå°±è·³è¿‡
- ä½†åœ¨ä¸åŒå±‚é€’å½’ä¸­ä»ç„¶å…è®¸ä½¿ç”¨ç›¸åŒçš„å€¼ï¼ˆä¾‹å¦‚ `[1,1,6]` æ˜¯åˆæ³•ç»„åˆï¼‰

---

## âœ‚ï¸ å‰ªæç­–ç•¥

æ’åºåï¼š

- å¦‚æœ `candidates[i]` å·²ç»å¾ˆå¤§ï¼Œåé¢åªä¼šæ›´å¤§
- å½“å‰å†™æ³•ç”¨çš„æ˜¯ï¼š

```cpp
if (candidates[i] > target) break;
```

æ›´ç²¾ç¡®çš„å‰ªæé€šå¸¸æ˜¯ï¼š

```cpp
if (sum + candidates[i] > target) break;
```

å› ä¸ºæ­¤æ—¶ `sum` ä¸ä¸€å®šä¸º 0ï¼ˆä½†ä½ åœ¨ä¸Šæ–¹ `sum>=target` å·²ç»å‰ªæäº†ï¼Œæ‰€ä»¥è¿™ç‚¹å±äºç»†åŒ–ä¼˜åŒ–ï¼‰ã€‚

---

## âœ… â€œæ¯ä¸ªæ•°åªèƒ½ç”¨ä¸€æ¬¡â€æ€ä¹ˆå®ç°ï¼Ÿ

é€’å½’æ—¶ä¼ å…¥ `i + 1`ï¼š

```cpp
dfs(..., i + 1);
```

è¡¨ç¤ºä¸‹ä¸€å±‚åªèƒ½ä»ä¸‹ä¸€ä¸ªä½ç½®ç»§ç»­é€‰ï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ âœ…

---

## ğŸ’» ä»£ç å®ç°

```cpp
class Solution {
public:
    void dfs(const auto &candidates, auto &ans, auto &t, int target, int &sum, int start){
        if (sum >= target){
            if (sum == target)
                ans.push_back(t); 
            return;
        }
        for (int i = start; i < candidates.size(); i++){
            if (candidates[i] > target)
                break;
            if (i != start && candidates[i] == candidates[i - 1])
                continue;

            if (t.empty() || candidates[i] >= t.back()){
                t.push_back(candidates[i]);
                sum += candidates[i];
                dfs(candidates, ans, t, target, sum, i + 1);
                sum -= candidates[i];
                t.pop_back();
            }
        }
    }

    vector<vector<int>> combinationSum2(vector<int>& candidates, int target) {
        sort(candidates.begin(), candidates.end());
        vector<vector<int>> ans;
        vector<int> t;
        int sum = 0;
        dfs(candidates, ans, t, target, sum, 0);
        return ans;
    }
};
```

---

## ğŸ” å…³é”®ç‚¹æ€»ç»“

### âœ… ä¸ã€Œç»„åˆæ€»å’Œ Iã€çš„åŒºåˆ«

| é¢˜ç›® | å…ƒç´ æ˜¯å¦å¯é‡å¤é€‰ | æ•°ç»„æ˜¯å¦å¯èƒ½é‡å¤ | å»é‡ç­–ç•¥ |
|------|------------------|------------------|---------|
| Combination Sum | âœ… å¯é‡å¤ä½¿ç”¨ | âŒ ä¸é‡å¤ | `start` æ§åˆ¶ |
| Combination Sum II | âŒ æ¯ä¸ªå…ƒç´ æœ€å¤šä¸€æ¬¡ | âœ… å¯èƒ½é‡å¤ | **æ ‘å±‚å»é‡** |

---

## â±ï¸ å¤æ‚åº¦åˆ†æ

å›æº¯é¢˜å¤æ‚åº¦ä¸æœç´¢æ ‘è§„æ¨¡æœ‰å…³ï¼ˆæŒ‡æ•°çº§ï¼‰ï¼Œé€šå¸¸è®°ä¸ºï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šæŒ‡æ•°çº§ï¼ˆä¾èµ–äºè§£çš„æ•°é‡ä¸å‰ªææ•ˆæœï¼‰
- ç©ºé—´å¤æ‚åº¦ï¼š`O(k)`ï¼ˆé€’å½’æ·±åº¦ + è·¯å¾„é•¿åº¦ï¼‰

---

## ğŸ§¾ æ€»ç»“

- æœ¬é¢˜æ ¸å¿ƒæ˜¯ï¼š**åœ¨â€œæ¯ä¸ªå…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡â€çš„å‰æä¸‹ï¼Œå¤„ç†é‡å¤å…ƒç´ å¸¦æ¥çš„é‡å¤ç»„åˆ**
- ä¸¤ä¸ªå…³é”®æŠ€å·§ï¼š
  1. `i + 1`ï¼šä¿è¯å…ƒç´ åªç”¨ä¸€æ¬¡
  2. `i != start && candidates[i] == candidates[i - 1]`ï¼šæ ‘å±‚å»é‡é¿å…é‡å¤ç­”æ¡ˆ

```text
ç»„åˆæ€»å’Œ II çš„çµé­‚ï¼š
æ’åº + æ ‘å±‚å»é‡ + i+1 æ§åˆ¶ä¸å¯é‡å¤ä½¿ç”¨
```
