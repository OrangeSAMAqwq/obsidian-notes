# é¢˜ç›®ï¼šå››æ•°ä¹‹å’Œ II (4Sum II) ğŸ¯

## é¢˜ç›®é“¾æ¥ ğŸŒ  
https://leetcode.cn/problems/4sum-ii/

---

## è§£é¢˜æ€è·¯ ğŸ§ 

### æ€è·¯åˆ†æ ğŸ§©

é¢˜ç›®è¦æ±‚ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªå››å…ƒç»„ `(i, j, k, l)` æ»¡è¶³ï¼š

```
nums1[i] + nums2[j] + nums3[k] + nums4[l] == 0
```

å¦‚æœä½¿ç”¨å››é‡å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šè¾¾åˆ° **O(nâ´)**ï¼Œæ˜¾ç„¶ä¼šè¶…æ—¶ã€‚  
å…³é”®ä¼˜åŒ–æ€æƒ³æ˜¯ä½¿ç”¨ **å“ˆå¸Œè¡¨ + åˆ†ç»„æšä¸¾ â†’ O(nÂ²)**ã€‚

å…·ä½“æ–¹æ³•ï¼š

- å°†å››ä¸ªæ•°ç»„åˆ†æˆä¸¤ç»„ï¼š
  - ç¬¬ä¸€ç»„ï¼š`nums1` ä¸ `nums2`
  - ç¬¬äºŒç»„ï¼š`nums3` ä¸ `nums4`
- å¯¹ç¬¬ä¸€ç»„æ±‚æ‰€æœ‰å¯èƒ½çš„å’Œï¼Œå¹¶ç»Ÿè®¡å‡ºç°æ¬¡æ•°ã€‚
- å¯¹ç¬¬äºŒç»„æ±‚æ‰€æœ‰å¯èƒ½çš„å’Œï¼ŒæŸ¥æ‰¾å®ƒä»¬çš„è´Ÿæ•°æ˜¯å¦å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ã€‚
- è‹¥å­˜åœ¨ï¼Œåˆ™åŠ ä¸Šå¯¹åº”å‡ºç°æ¬¡æ•°ã€‚

---

## æˆ‘çš„ç¬¬ä¸€æ¬¡åšæ³• ğŸ§ ï¼ˆå¤šå±‚å“ˆå¸Œç»Ÿè®¡ï¼Œä½†æ­£ç¡®ï¼‰

### æ€è·¯æ¦‚è¿°ï¼š

å°† 4 ä¸ªæ•°ç»„åˆ†æˆä¸‰å±‚æ„å»ºå“ˆå¸Œï¼š
1. `hashmap1` ç»Ÿè®¡ nums1 å‡ºç°æ¬¡æ•°
2. ä½¿ç”¨ `hashmap1 + nums2` æ„å»º `hashmap2`
3. ä½¿ç”¨ `hashmap2 + nums3` æ„å»º `hashmap3`
4. ä½¿ç”¨ nums4 æŸ¥æ‰¾è¡¥æ•°

è™½ç„¶å®ç°æ¯”è¾ƒç¹çï¼Œä½†å®Œå…¨æ­£ç¡®ï¼Œé¡ºåˆ© ACã€‚

---

### ä»£ç å®ç° ğŸ’»ï¼ˆç¬¬ä¸€æ¬¡å†™æ³•ï¼‰

```cpp
class Solution {
public:
    int fourSumCount(vector<int>& nums1, vector<int>& nums2, vector<int>& nums3, vector<int>& nums4) {
        std::unordered_map<int, int> hashmap1;
        std::unordered_map<int, int> hashmap2;
        std::unordered_map<int, int> hashmap3;

        // nums1 è®¡æ•°
        for (int i = 0; i < nums1.size(); i++){
            hashmap1[nums1[i]]++;
        }

        // nums1 + nums2
        for (int i = 0; i < nums2.size(); i++){
            for (auto it = hashmap1.begin(); it != hashmap1.end(); it++){
                hashmap2[nums2[i] + it->first] += it->second;
            }
        }

        // (nums1 + nums2) + nums3
        for (int i = 0; i < nums3.size(); i++){
            for (auto it = hashmap2.begin(); it != hashmap2.end(); it++){
                hashmap3[nums3[i] + it->first] += it->second;
            }
        }

        // é…å¯¹ nums4
        int ans = 0;
        for (int i = 0; i < nums4.size(); i++){
            int cnt = 0 - nums4[i];
            if (hashmap3[cnt] != 0)
                ans += hashmap3[cnt];
        }
        return ans;
    }
};
```

---

## æˆ‘çš„ç¬¬äºŒæ¬¡åšæ³• ğŸ¯ï¼ˆæœ€ä¼˜å®ç°ï¼Œä¸€æ¬¡è¿‡ï¼‰

åæ¥å†™å‡ºæ›´æ ‡å‡†ã€æ›´ç²¾ç®€çš„å†™æ³•ï¼Œå°†å››æ•°ç»„åˆ†ä¸¤ç»„å¤„ç†ï¼š

- ç¬¬ä¸€ç»„ï¼š`nums1 + nums2` â†’ å­˜å…¥ `hashmap`
- ç¬¬äºŒç»„ï¼š`nums3 + nums4` â†’ æŸ¥ `-(nums3 + nums4)` æ˜¯å¦å­˜åœ¨

è¿™ç§å†™æ³•æ˜¯å®˜æ–¹æ¨èçš„æ–¹å¼ï¼Œå¤æ‚åº¦æœ€ä½ã€ç»“æ„æœ€æ¸…æ™°ã€‚

---

### ä»£ç å®ç° ğŸ’»ï¼ˆç¬¬äºŒæ¬¡å†™æ³•ï¼‰

```cpp
class Solution {
public:
    int fourSumCount(vector<int>& nums1, vector<int>& nums2,
                     vector<int>& nums3, vector<int>& nums4) {
        std::unordered_map<int, int> hashmap;

        // nums1 + nums2 çš„æ‰€æœ‰å¯èƒ½å’Œ
        for (int i = 0; i < nums1.size(); i++){
            for (int j = 0; j < nums2.size(); j++){
                hashmap[nums1[i] + nums2[j]]++;
            }
        }

        // nums3 + nums4 çš„è¡¥æ•°æŸ¥æ‰¾
        int ans = 0;
        for (int i = 0; i < nums3.size(); i++){
            for (int j = 0; j < nums4.size(); j++){
                int cnt = 0 - (nums3[i] + nums4[j]);
                ans += hashmap[cnt];
            }
        }
        return ans;
    }
};
```

---

## ä¸¤ç§æ–¹æ³•å¯¹æ¯” ğŸ†š

| æ–¹æ³• | ç»“æ„ | éš¾åº¦ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | ç‰¹ç‚¹ |
|------|------|-------|------------|-------------|---------|
| ç¬¬ä¸€æ¬¡æ–¹æ³• | ä¸‰å±‚å“ˆå¸Œç´¯ç§¯ | â­â­â­ | O(nÂ²) | O(nÂ²) | æ€è·¯å®Œæ•´ï¼Œä½†ä»£ç ç¹ç |
| ç¬¬äºŒæ¬¡æ–¹æ³• | æ ‡å‡†åŒç»„å“ˆå¸Œ | â­ | O(nÂ²) | O(nÂ²) | ç»“æ„æ¸…æ™°ï¼Œä»£ç æœ€ä¼˜ |

---

## å…³é”®ç‚¹ ğŸ”‘

- **åˆ†ç»„æ€æƒ³**ï¼šæŠŠå››é‡å¾ªç¯å˜æˆä¸¤é‡å¾ªç¯ï¼Œæé«˜æ•ˆç‡  
- **å“ˆå¸Œè®¡æ•°**ï¼šä¸æ˜¯åªå­˜å­˜åœ¨å…³ç³»ï¼Œè€Œæ˜¯å­˜ *å‡ºç°æ¬¡æ•°*  
- **æŸ¥è¡¥æ•°**ï¼š`a + b + c + d == 0` â†’ `a + b = -(c + d)`

---

## è¾¹ç•Œæƒ…å†µ ğŸš¨

1. æ•°ç»„å¯èƒ½ä¸ºç©º â†’ è¿”å› 0  
2. å…¨éƒ¨ä¸º 0 â†’ ç»“æœä¸º nâ´  
3. æœ‰é‡å¤æ•°å­— â†’ å¿…é¡»ç”¨é¢‘æ¬¡ç´¯åŠ   

---

## æ€»ç»“ ğŸ“š

é€šè¿‡å“ˆå¸Œåˆ†ç»„ï¼Œå››æ•°ä¹‹å’Œ II å¯ä»¥åœ¨ **O(nÂ²)** æ—¶é—´å†…è§£å†³ã€‚  
ç¬¬ä¸€æ¬¡çš„å†™æ³•ç»“æ„è¾ƒå¤æ‚ï¼Œä½†å¸®åŠ©ç†è§£äº†æ•´ä½“åˆ†ç»„è¿‡ç¨‹ï¼›  
ç¬¬äºŒæ¬¡å†™æ³•æ˜¯è¯¥é¢˜çš„æœ€ä¼˜è§£ï¼Œç®€æ´é«˜æ•ˆï¼Œå€¼å¾—ä½œä¸ºæœ€ç»ˆæ¨¡æ¿ã€‚

