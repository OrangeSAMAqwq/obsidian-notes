# é¢˜ç›®ï¼šåˆ’åˆ†å­—æ¯åŒºé—´ (Partition Labels) âœ‚ï¸ğŸ”¤

## é¢˜ç›®é“¾æ¥  
https://leetcode.cn/problems/partition-labels/

---

## ğŸ§  è§£é¢˜æ€è·¯

### ğŸ“‹ é¢˜æ„ç†è§£  
ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œéœ€è¦æŠŠå®ƒåˆ’åˆ†æˆå°½å¯èƒ½å¤šçš„ç‰‡æ®µï¼Œä½¿å¾—ï¼š

- **æ¯ä¸ªå­—æ¯æœ€å¤šå‡ºç°åœ¨ä¸€ä¸ªç‰‡æ®µé‡Œ**
- è¿”å›æ¯ä¸ªç‰‡æ®µçš„é•¿åº¦

---

## ğŸŒŸ æ ¸å¿ƒæ€æƒ³ï¼šåŒºé—´åˆå¹¶ + è´ªå¿ƒ

æŠŠæ¯ä¸ªå­—ç¬¦çœ‹æˆä¸€ä¸ªåŒºé—´ï¼š

- å¯¹äºå­—æ¯ `c`ï¼Œå®ƒåœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„ä½ç½®èŒƒå›´æ˜¯ï¼š
  ```text
  [first(c), last(c)]
  ```
å¦‚æœä¸€ä¸ªç‰‡æ®µè¦åŒ…å«å­—æ¯ `c`ï¼Œå°±å¿…é¡»è¦†ç›–æ•´ä¸ª `[first(c), last(c)]`ã€‚

å› æ­¤é—®é¢˜å˜æˆï¼š

> æŠŠæ‰€æœ‰å­—æ¯çš„å‡ºç°åŒºé—´æ‹¿å‡ºæ¥ï¼ŒæŒ‰èµ·ç‚¹æ’åºåè¿›è¡ŒåŒºé—´åˆå¹¶ï¼›  
> æ¯åˆå¹¶å‡ºä¸€ä¸ªäº’ä¸ç›¸äº¤çš„å¤§åŒºé—´ï¼Œå°±æ˜¯ä¸€ä¸ªç‰‡æ®µã€‚

åˆå¹¶å®Œæˆåï¼ŒåŒºé—´è¶Šå¤šï¼Œç‰‡æ®µå°±è¶Šå¤šï¼ˆæ»¡è¶³â€œå°½å¯èƒ½å¤šâ€ï¼‰ã€‚

---

## âœ¨ ä½ çš„åšæ³•æ‹†è§£

### âœ… 1) ç»Ÿè®¡æ¯ä¸ªå­—æ¯çš„å‡ºç°åŒºé—´ `[first, last]`

ä½ ç”¨ `alphabet[26][2]` ä¿å­˜ï¼š

- `alphabet[x][0]`ï¼šæœ€å·¦å‡ºç°ä½ç½®ï¼ˆfirstï¼‰
- `alphabet[x][1]`ï¼šæœ€å³å‡ºç°ä½ç½®ï¼ˆlastï¼‰

æ‰«æå­—ç¬¦ä¸²æ—¶æ›´æ–°ï¼š

- `first = min(first, i)`
- `last = max(last, i)`

---

### âœ… 2) æŒ‰åŒºé—´èµ·ç‚¹æ’åº

```cpp
sort(alphabet.begin(), alphabet.end(), [](auto &a, auto &b){
    return a[0] < b[0];
});
```

è¿™æ ·æ‰€æœ‰æœ‰æ•ˆåŒºé—´ä¼šæŒ‰èµ·ç‚¹ä»å°åˆ°å¤§æ’åˆ—ï¼ˆç±»ä¼¼â€œåŒºé—´åˆå¹¶â€æ¨¡æ¿ï¼‰ã€‚

---

### âœ… 3) åˆå¹¶åŒºé—´å¹¶è¾“å‡ºç‰‡æ®µé•¿åº¦

ç»´æŠ¤å½“å‰åˆå¹¶åŒºé—´ï¼š

- `cntMin`ï¼šå½“å‰åŒºé—´å·¦ç«¯ç‚¹
- `cntMax`ï¼šå½“å‰åŒºé—´å³ç«¯ç‚¹
- `index`ï¼šä¸Šä¸€ä¸ªç‰‡æ®µç»“æŸçš„ä½ç½®ï¼ˆåˆå§‹ä¸º -1ï¼Œæ–¹ä¾¿ç›´æ¥ç®—é•¿åº¦ï¼‰

éå†ä¸‹ä¸€ä¸ªå­—æ¯åŒºé—´ `[l, r]`ï¼š

- å¦‚æœ `l > cntMax`  
  ğŸ‘‰ è¯´æ˜æ–°åŒºé—´å’Œå½“å‰åŒºé—´ä¸é‡å ï¼Œå¯ä»¥ç»“ç®—ä¸€ä¸ªç‰‡æ®µï¼š
  ```cpp
  ans.push_back(cntMax - index);
  index = cntMax;
  ```
  ç„¶åå¼€å¯æ–°åŒºé—´
- å¦åˆ™  
  ğŸ‘‰ æœ‰é‡å ï¼Œæ›´æ–°å³ç«¯ç‚¹ï¼š
  ```cpp
  cntMax = max(cntMax, r);
  ```

æœ€åå†æŠŠæœ€åä¸€ä¸ªç‰‡æ®µåŠ è¿›å»ã€‚

---

## ğŸ’» ä»£ç å®ç°

```cpp
class Solution {
public:
    vector<int> partitionLabels(string s) {
        vector<vector<int>> alphabet(26, vector<int>(2, INT_MAX));
        for (int i = 0; i < s.size(); i++){
            int cnt = s[i] - 'a';
            alphabet[cnt][0] = min(alphabet[cnt][0], i);
            if (alphabet[cnt][1] == INT_MAX)
                alphabet[cnt][1] = i;
            else 
                alphabet[cnt][1] = max(alphabet[cnt][1], i);
        }

        sort(alphabet.begin(), alphabet.end(), [](auto &a, auto &b){
            return a[0] < b[0];
        });

        vector<int> ans;
        int cntMin = alphabet[0][0], cntMax = alphabet[0][1], index = -1;
        for (int i = 1; i < alphabet.size(); i++){
            if (alphabet[i][0] == INT_MAX)
                break;
            if (alphabet[i][0] > cntMax){
                ans.push_back(cntMax - index);
                index = cntMax;
                cntMin = alphabet[i][0];
                cntMax = alphabet[i][1];
            }
            else {
                cntMax = max(cntMax, alphabet[i][1]);
            }
        }
        ans.push_back(cntMax - index);
        return ans;
    }
};
```

---

## ğŸ” å…³é”®ç‚¹è§£æ

### âœ… ä¸ºä»€ä¹ˆâ€œåˆå¹¶åŒºé—´â€èƒ½ä¿è¯å­—æ¯ä¸ä¼šè·¨ç‰‡æ®µï¼Ÿ
å› ä¸ºæ¯ä¸ªå­—æ¯çš„åŒºé—´ `[first, last]` å¿…é¡»å®Œæ•´åŒ…å«åœ¨æŸä¸€ä¸ªç‰‡æ®µé‡Œã€‚  
è‹¥ä¸¤ä¸ªå­—æ¯åŒºé—´æœ‰äº¤é›†ï¼Œå®ƒä»¬å¿…é¡»åœ¨åŒä¸€ä¸ªç‰‡æ®µï¼Œå¦åˆ™ä¼šå¯¼è‡´å­—æ¯è·¨ç‰‡æ®µå‡ºç°ã€‚

æ‰€ä»¥ç‰‡æ®µå°±æ˜¯åˆå¹¶åçš„â€œå¤§åŒºé—´â€ã€‚

---

### âœ… `index = -1` çš„å°æŠ€å·§
å½“ç¬¬ä¸€ä¸ªç‰‡æ®µç»“æŸåœ¨ `cntMax` æ—¶ï¼š

```cpp
é•¿åº¦ = cntMax - (-1) = cntMax + 1
```

åˆšå¥½æ˜¯ `[0..cntMax]` çš„é•¿åº¦ï¼Œéå¸¸é¡ºæ‰‹ã€‚

---

## â±ï¸ å¤æ‚åº¦åˆ†æ

è®¾ `n = s.size()`ï¼š

- æ‰«æå­—ç¬¦ä¸²ï¼š`O(n)`
- æ’åº 26 ä¸ªåŒºé—´ï¼š`O(26 log 26)`ï¼ˆå¯è§†ä¸ºå¸¸æ•°ï¼‰
- åˆå¹¶ï¼š`O(26)`ï¼ˆå¸¸æ•°ï¼‰

| ç±»å‹ | å¤æ‚åº¦ |
|------|--------|
| æ—¶é—´å¤æ‚åº¦ | O(n) |
| ç©ºé—´å¤æ‚åº¦ | O(1)ï¼ˆ26 ä¸ªå­—æ¯å¸¸æ•°ç©ºé—´ï¼‰ |

---

## ğŸ§¾ æ€»ç»“

- æœ¬é¢˜å¯ä»¥è§†ä½œï¼š**å­—æ¯å‡ºç°åŒºé—´çš„åˆå¹¶é—®é¢˜**
- è´ªå¿ƒç›®æ ‡â€œå°½å¯èƒ½å¤šç‰‡æ®µâ€ â‡” å°½å¯èƒ½å¤šçš„äº’ä¸ç›¸äº¤åˆå¹¶åŒºé—´
- ä½ çš„å®ç°æ˜¯â€œåŒºé—´åˆå¹¶ç‰ˆæœ¬â€çš„æ€è·¯ï¼Œé€»è¾‘å¾ˆæ¸…æ™°ä¸”å¤æ‚åº¦ O(n) âœ…

```text
Partition Labels çš„ç²¾é«“ï¼š
æ¯ä¸ªå­—æ¯ = ä¸€ä¸ªåŒºé—´ï¼Œç­”æ¡ˆ = åˆå¹¶åçš„åŒºé—´é•¿åº¦
```
