# é¢˜ç›®ï¼šé€’å¢å­åºåˆ— (Non-decreasing Subsequences) ğŸ“ˆğŸ§©

## é¢˜ç›®é“¾æ¥  
https://leetcode.cn/problems/non-decreasing-subsequences/

---

## ğŸ§  è§£é¢˜æ€è·¯

### ğŸ“‹ é¢˜æ„ç†è§£  
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæ‰¾å‡ºæ‰€æœ‰ä¸åŒçš„ **é€’å¢å­åºåˆ—**ï¼ˆæ›´å‡†ç¡®è¯´æ˜¯ **éé€’å‡å­åºåˆ—**ï¼‰ï¼š

- å­åºåˆ—é•¿åº¦ **è‡³å°‘ä¸º 2**
- å­åºåˆ—ä¸­å…ƒç´ æ»¡è¶³ï¼š`nums[i1] <= nums[i2] <= ...`
- å­åºåˆ—ä¸è¦æ±‚è¿ç»­ï¼ˆæ˜¯ subsequenceï¼Œä¸æ˜¯ subarrayï¼‰
- è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å­åºåˆ—

---

## ğŸŒŸ æ ¸å¿ƒæ€æƒ³ï¼šå›æº¯ï¼ˆBacktrackingï¼‰+ æ ‘å±‚å»é‡

### 1) å›æº¯æšä¸¾å­åºåˆ—
ç”¨ `t` è®°å½•å½“å‰é€‰å‡ºçš„å­åºåˆ—è·¯å¾„ï¼š

- ä» `start` å¼€å§‹å‘åæšä¸¾æ¯ä¸ªä½ç½® `i`
- å¦‚æœèƒ½æ¥åœ¨ `t` åé¢ï¼ˆæ»¡è¶³éé€’å‡ï¼‰ï¼Œå°±å°è¯•åŠ å…¥å¹¶é€’å½’

### 2) æ”¶é›†ç­”æ¡ˆæ¡ä»¶
æœ¬é¢˜è¦æ±‚é•¿åº¦è‡³å°‘ 2ï¼Œå› æ­¤ï¼š

```cpp
if (t.size() >= 2) ans.push_back(t);
```

æ³¨æ„ï¼šå³ä½¿å·²ç»æ”¶é›†äº†ç­”æ¡ˆï¼Œä¹Ÿä¸èƒ½åœæ­¢ï¼Œå› ä¸ºæ›´é•¿çš„åˆæ³•åºåˆ—è¿˜å¯èƒ½å‡ºç°ã€‚

### 3) å»é‡å…³é”®ï¼šæ¯ä¸€å±‚ç”¨å“ˆå¸Œè¡¨å»é‡ âœ…
æ•°ç»„æ²¡æœ‰æ’åºï¼Œå¹¶ä¸”ä¼šå‡ºç°é‡å¤æ•°å­—ï¼Œä¾‹å¦‚ `[4,6,7,7]`  
å¦‚æœåŒä¸€å±‚åŒæ—¶é€‰ä¸¤ä¸ª `7` å¼€å¤´ï¼Œä¼šäº§ç”Ÿé‡å¤å­åºåˆ—ã€‚

å› æ­¤åœ¨æ¯ä¸€å±‚é€’å½’é‡Œï¼Œæ–°å»ºä¸€ä¸ª `hashmap` è®°å½•æœ¬å±‚å·²ç»ä½¿ç”¨è¿‡çš„æ•°å­—ï¼š

```cpp
unordered_map<int, bool> hashmap;
```

å½“æŸä¸ªæ•°å·²ç»åœ¨è¿™ä¸€å±‚ä½¿ç”¨è¿‡ï¼Œå°±è·³è¿‡ï¼š

```cpp
if (hashmap[nums[i]] == true) continue;
hashmap[nums[i]] = true;
```

âœ… è¿™å«ã€Œæ ‘å±‚å»é‡ã€ï¼Œåªæ§åˆ¶åŒå±‚é‡å¤ï¼Œä¸å½±å“ä¸åŒå±‚ï¼ˆä¾‹å¦‚å…è®¸ `[7,7]` è¿™ç§æƒ…å†µï¼‰ã€‚

---

## ğŸ’» ä»£ç å®ç°

```cpp
class Solution {
public:
    void dfs(auto &ans, auto &t, const auto &nums, int start){
        if (t.size() >= 2){
            ans.push_back(t);
        }

        unordered_map<int, bool> hashmap; // æ ‘å±‚å»é‡
        for (int i = start; i < nums.size(); i++){
            if (t.empty() || nums[i] >= t.back()){
                if (hashmap[nums[i]] == true)
                    continue;
                hashmap[nums[i]] = true;

                t.push_back(nums[i]);
                dfs(ans, t, nums, i + 1);
                t.pop_back();
            }
        }
    }

    vector<vector<int>> findSubsequences(vector<int>& nums) {
        vector<vector<int>> ans;
        vector<int> t;
        dfs(ans, t, nums, 0);
        return ans;
    }
};
```

---

## ğŸ” å…³é”®ç‚¹è§£æ

### âœ… ä¸ºä»€ä¹ˆè¿™é¢˜ä¸èƒ½åƒã€Œå­é›† IIã€é‚£æ ·æ’åºå»é‡ï¼Ÿ
å› ä¸ºè¿™é‡Œè¦æ±‚çš„æ˜¯ **å­åºåˆ—**ï¼ˆç›¸å¯¹é¡ºåºå¿…é¡»ä¿ç•™ï¼‰ã€‚  
å¦‚æœæ’åºä¼šæ”¹å˜åŸé¡ºåºï¼Œç»“æœå°±ä¸æ˜¯åŸæ•°ç»„çš„å­åºåˆ—äº† âŒ

æ‰€ä»¥åªèƒ½åœ¨æ¯ä¸€å±‚ç”¨å“ˆå¸Œè¡¨å»é‡ï¼Œè€Œä¸æ˜¯æ’åºåé ç›¸é‚»åˆ¤æ–­å»é‡ã€‚

### âœ… æ ‘å±‚å»é‡ vs æ ‘æå»é‡
- **æ ‘å±‚å»é‡**ï¼šåŒä¸€å±‚ä¸èƒ½é‡å¤é€‰åŒæ ·çš„æ•°ä½œä¸ºèµ·ç‚¹ï¼ˆé¿å…é‡å¤ç­”æ¡ˆï¼‰
- **æ ‘æå…è®¸é‡å¤**ï¼šä¸åŒå±‚å¯ä»¥ç»§ç»­é€‰åŒå€¼ï¼ˆä¾‹å¦‚ `[7,7]`ï¼‰

---

## â±ï¸ å¤æ‚åº¦åˆ†æ

è®¾ `n = nums.size()`ï¼š

- å›æº¯æœç´¢è§„æ¨¡æ¥è¿‘ `2^n`
- æ¯å±‚ç”¨å“ˆå¸Œè¡¨å»é‡å¢åŠ å¸¸æ•°å¼€é”€

| ç±»å‹ | å¤æ‚åº¦ |
|------|--------|
| æ—¶é—´å¤æ‚åº¦ | O(n Â· 2^n)ï¼ˆè¿‘ä¼¼ä¸Šç•Œï¼‰ |
| ç©ºé—´å¤æ‚åº¦ | O(n)ï¼ˆé€’å½’æ ˆ + è·¯å¾„ï¼‰ + æ¯å±‚å“ˆå¸Œè¡¨ï¼ˆå¸¸æ•°çº§å‡æ‘Šï¼‰ |

---

## ğŸ§¾ æ€»ç»“

- æœ¬é¢˜æ˜¯ç»å…¸çš„ã€Œå­åºåˆ—å›æº¯ã€é¢˜
- ä¸¤ä¸ªæ ¸å¿ƒç‚¹ï¼š
  1. é€’å¢çº¦æŸï¼š`nums[i] >= t.back()`
  2. å»é‡æ–¹å¼ï¼šæ¯å±‚ç”¨å“ˆå¸Œè¡¨è¿›è¡Œ **æ ‘å±‚å»é‡**
- æ’åºä¸èƒ½ç”¨ï¼Œå› ä¸ºä¼šç ´åå­åºåˆ—çš„ç›¸å¯¹é¡ºåº

```text
å­åºåˆ—é¢˜çš„å»é‡å…³é”®ï¼š
ä¸èƒ½æ’åº â†’ ç”¨â€œæ¯å±‚å“ˆå¸Œè¡¨â€å»é‡
```
