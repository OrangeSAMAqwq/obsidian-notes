# é¢˜ç›®ï¼šå…¨æ’åˆ— II (Permutations II) ğŸ”„ğŸ§©âœ¨

## é¢˜ç›®é“¾æ¥  
https://leetcode.cn/problems/permutations-ii/

---

## ğŸ§  è§£é¢˜æ€è·¯

### ğŸ“‹ é¢˜æ„ç†è§£  
ç»™å®šä¸€ä¸ªå¯èƒ½åŒ…å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums`ï¼Œè¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

ç‰¹ç‚¹ï¼š

- æ’åˆ—ï¼šé¡ºåºç›¸å…³
- æ¯ä¸ªå…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡ï¼ˆæŒ‰ä¸‹æ ‡ç”¨ä¸€æ¬¡ï¼‰
- æ•°ç»„å«é‡å¤å€¼ï¼Œéœ€è¦**å»é‡**é¿å…é‡å¤æ’åˆ—

---

## ğŸŒŸ æ ¸å¿ƒæ€æƒ³ï¼šå›æº¯ + ä½æ©ç  + æ ‘å±‚å»é‡

### âœ… 1) ä½æ©ç  `pick`ï¼šè®°å½•å“ªäº›ä¸‹æ ‡è¿˜å¯ä»¥é€‰

- ç¬¬ `i` ä½ä¸º 1ï¼š`nums[i]` è¿˜æ²¡ç”¨è¿‡
- ç¬¬ `i` ä½ä¸º 0ï¼šå·²ç»ç”¨è¿‡

å½“ `pick == 0` æ—¶è¯´æ˜æ‰€æœ‰æ•°éƒ½é€‰å®Œäº†ï¼Œå½“å‰è·¯å¾„ `t` æ˜¯ä¸€ä¸ªå®Œæ•´æ’åˆ—ã€‚

---

### âœ… 2) å»é‡å…³é”®ï¼šæ¯ä¸€å±‚ç”¨å“ˆå¸Œè¡¨å»é‡ï¼ˆæ ‘å±‚å»é‡ï¼‰

å› ä¸º `nums` å¯èƒ½æœ‰é‡å¤å€¼ï¼Œä¾‹å¦‚ `[1,1,2]`ï¼š

å¦‚æœåœ¨åŒä¸€å±‚ï¼ˆåŒä¸€ä¸ªé€’å½’æ·±åº¦ï¼‰ï¼š

- å…ˆé€‰ç¬¬ä¸€ä¸ª `1`
- å†é€‰ç¬¬äºŒä¸ª `1`

ä¼šäº§ç”Ÿå®Œå…¨ç›¸åŒçš„åç»­æ’åˆ—åˆ†æ”¯ï¼Œå¯¼è‡´é‡å¤ç­”æ¡ˆã€‚

æ‰€ä»¥ä½ åœ¨æ¯ä¸€å±‚é€’å½’ä¸­å»ºç«‹ï¼š

```cpp
unordered_map<int, bool> hashmap;
```

ç”¨æ¥è®°å½•æœ¬å±‚å·²ç»é€‰è¿‡çš„â€œå€¼â€ï¼ŒåŒä¸€å±‚ç›¸åŒå€¼åªå…è®¸é€‰ä¸€æ¬¡ï¼š

```cpp
if (hashmap[nums[i]] == true) continue;
hashmap[nums[i]] = true;
```

âœ… è¿™å°±æ˜¯æ’åˆ—å»é‡çš„ç»å…¸æŠ€å·§ä¹‹ä¸€ï¼š**æ ‘å±‚å»é‡**

---

## âœ¨ é€’å½’å‡½æ•°è®¾è®¡

```cpp
dfs(ans, t, nums, pick)
```

| å‚æ•° | å«ä¹‰ |
|------|------|
| `ans` | æ‰€æœ‰ä¸é‡å¤æ’åˆ— |
| `t` | å½“å‰æ’åˆ—è·¯å¾„ |
| `nums` | åŸæ•°ç»„ï¼ˆå·²æ’åºï¼‰ |
| `pick` | å¯ç”¨ä¸‹æ ‡é›†åˆï¼ˆbitmaskï¼‰ |

---

## ğŸ’» ä»£ç å®ç°

```cpp
class Solution {
public:
    void dfs(auto &ans, auto &t, const auto &nums, auto &pick) {
        if (pick == 0){
            ans.push_back(t);
            return;
        }
        std::unordered_map<int, bool> hashmap; // æ ‘å±‚å»é‡
        for (int i = 0; i < nums.size(); i++) {
            if (pick & 1 << i){
                if (hashmap[nums[i]] == true)
                    continue;
                hashmap[nums[i]] = true;

                pick -= 1 << i;
                t.push_back(nums[i]);
                dfs(ans, t, nums, pick);
                t.pop_back();
                pick += 1 << i;
            }
        }
    }

    vector<vector<int>> permuteUnique(vector<int>& nums) {
        sort(nums.begin(), nums.end());
        vector<vector<int>> ans;
        vector<int> t;

        int pick = 0;
        for (int i = 0; i < nums.size(); i++){
            pick += 1 << i;
        }

        dfs(ans, t, nums, pick);
        return ans;
    }
};
```

---

## ğŸ” å…³é”®ç‚¹è§£æ

### âœ… ä¸ºä»€ä¹ˆæ’åºè¿˜èƒ½ä¿ç•™ï¼Ÿ
è¿™é‡Œæ’åºå¹¶ä¸ä¼šç ´åâ€œæ’åˆ—â€çš„æ­£ç¡®æ€§ï¼Œå› ä¸ºæ’åˆ—æœ¬æ¥å°±æ˜¯è¦æšä¸¾æ‰€æœ‰é¡ºåºã€‚  
æ’åºçš„ä½œç”¨æ˜¯ï¼š

- è®©ç›¸åŒæ•°å­—é›†ä¸­ï¼Œæ–¹ä¾¿å»é‡æ€è·¯æ›´ç¨³å®š
- å³ä¾¿ä½ ç”¨çš„æ˜¯å“ˆå¸Œå»é‡ï¼Œä¹Ÿå±äºè‰¯å¥½ä¹ æƒ¯ âœ…

### âœ… æ ‘å±‚å»é‡ vs æ ‘æå»é‡

- **æ ‘æ**ï¼šæ§åˆ¶ä¸‹æ ‡ä¸èƒ½é‡å¤ï¼ˆ`pick` è´Ÿè´£ï¼‰
- **æ ‘å±‚**ï¼šæ§åˆ¶åŒå±‚ä¸é€‰ç›¸åŒå€¼å¼€å¤´ï¼ˆ`hashmap` è´Ÿè´£ï¼‰

ä¸¤è€…ç¼ºä¸€ä¸å¯ã€‚

---

## â±ï¸ å¤æ‚åº¦åˆ†æ

è®¾ `n = nums.size()`ï¼š

- æœ€åæƒ…å†µä¸‹æ— é‡å¤ï¼šéœ€è¦æšä¸¾ `n!` ä¸ªæ’åˆ—
- æœ‰é‡å¤æ—¶ç­”æ¡ˆæ•°é‡å˜å°‘ï¼Œä½†æœç´¢ä»æ¥è¿‘é˜¶ä¹˜è§„æ¨¡

| ç±»å‹ | å¤æ‚åº¦ |
|------|--------|
| æ—¶é—´å¤æ‚åº¦ | O(n Â· n!)ï¼ˆä¸Šç•Œï¼‰ |
| ç©ºé—´å¤æ‚åº¦ | O(n)ï¼ˆé€’å½’æ ˆ + è·¯å¾„ï¼‰+ æ¯å±‚ä¸€ä¸ªå“ˆå¸Œè¡¨ |

---

## ğŸ§¾ æ€»ç»“

- å…¨æ’åˆ— II = å…¨æ’åˆ— + å»é‡
- å»é‡å…³é”®ï¼š**åŒä¸€å±‚ä¸èƒ½é‡å¤é€‰ç›¸åŒçš„å€¼**
- ä½ çš„å®ç°é‡‡ç”¨ï¼š
  - ä½æ©ç  `pick` æ§åˆ¶ä¸‹æ ‡ä½¿ç”¨ä¸€æ¬¡
  - æ¯å±‚ `hashmap` æ§åˆ¶å€¼å»é‡ï¼ˆæ ‘å±‚å»é‡ï¼‰

```text
æ’åˆ—å»é‡çš„æœ¬è´¨ï¼š
åŒä¸€å±‚ä¸èƒ½ç”¨ç›¸åŒçš„å€¼å¼€å¤´ï¼Œå¦åˆ™åé¢æ•´æ£µåˆ†æ”¯ä¼šé‡å¤
```
